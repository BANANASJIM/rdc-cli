---
import Docs from '../../layouts/Docs.astro';
---

<Docs title="Installation">
  <h2>PyPI (Recommended)</h2>
  <pre><code>pipx install rdc-cli</code></pre>
  <p>
    This installs the <code>rdc</code> command. You still need the renderdoc
    Python module (see bootstrap commands below).
  </p>

  <h2>AUR (Arch Linux)</h2>
  <p>
    The AUR packages build the renderdoc Python module automatically, so no
    extra setup is needed.
  </p>
  <pre><code># Recommended: tracks latest master
yay -S rdc-cli-git

# or stable: tracks tagged releases
yay -S rdc-cli</code></pre>

  <h2>From Source</h2>
  <pre><code>git clone https://github.com/BANANASJIM/rdc-cli.git
cd rdc-cli
pixi install && pixi run sync
pixi run setup-renderdoc</code></pre>

  <h2>Platform Support</h2>
  <table>
    <thead>
      <tr>
        <th>Platform</th>
        <th>Local capture/replay</th>
        <th>Split client</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Linux</td>
        <td>Supported</td>
        <td>Supported</td>
      </tr>
      <tr>
        <td>macOS</td>
        <td>Supported (<code>pixi run setup-renderdoc</code>)</td>
        <td>Supported (no local RenderDoc needed)</td>
      </tr>
      <tr>
        <td>Windows (experimental)</td>
        <td>Expected support</td>
        <td>Expected support</td>
      </tr>
    </tbody>
  </table>

  <h2>RenderDoc Python Module</h2>
  <p>
    <code>rdc</code> requires the renderdoc Python module
    (<code>renderdoc.cpython-*.so</code>), which is <strong>not</strong>
    included in most system packages. Your Python version must match the one
    used to compile renderdoc.
  </p>

  <h3>Bootstrap (Recommended)</h3>
  <p>
    Canonical cross-platform command (run from repo root):
  </p>
  <pre><code>python scripts/build_renderdoc.py .local/renderdoc --build-dir .local/renderdoc-build</code></pre>

  <p>
    If you already use pixi, use the wrapper task:
  </p>
  <pre><code>pixi run setup-renderdoc</code></pre>

  <h3>Building Manually</h3>
  <pre><code>git clone --depth 1 https://github.com/baldurk/renderdoc.git
cd renderdoc
cmake -B build -DENABLE_PYRENDERDOC=ON -DENABLE_QRENDERDOC=OFF
cmake --build build -j$(nproc)
export RENDERDOC_PYTHON_PATH=$PWD/build/lib</code></pre>

  <h3>Module Discovery</h3>
  <p>rdc-cli searches for the renderdoc module in this order:</p>
  <ol>
    <li><code>RENDERDOC_PYTHON_PATH</code> environment variable</li>
    <li><code>~/.local/renderdoc</code> (where the bootstrap installs)</li>
    <li><code>/usr/lib/renderdoc</code>, <code>/usr/local/lib/renderdoc</code></li>
    <li>Sibling directory of <code>renderdoccmd</code> on PATH</li>
  </ol>

  <h3>Verification</h3>
  <pre><code>rdc doctor</code></pre>
  <p>
    This checks renderdoc module availability, Python version compatibility,
    and system configuration.
  </p>

  <h2>Shell Completions</h2>
  <pre><code># Bash
rdc completion bash > ~/.local/share/bash-completion/completions/rdc

# Zsh
rdc completion zsh > ~/.zfunc/_rdc

# Fish
rdc completion fish > ~/.config/fish/completions/rdc.fish</code></pre>
</Docs>
