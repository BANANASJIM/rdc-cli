---
import Docs from '../../layouts/Docs.astro';
---

<Docs title="Command Reference">
  <p>
    All commands support <code>--json</code> for machine-readable output and
    <code>--help</code> for detailed usage. TSV is the default output format.
  </p>

  <!-- Session -->
  <h2 id="session">Session</h2>

  <h3 id="open">open</h3>
  <p>Create local default session and start daemon skeleton.</p>
  <pre><code>rdc open &lt;capture.rdc&gt; [--port PORT]</code></pre>

  <h3 id="close">close</h3>
  <p>Close daemon-backed session.</p>
  <pre><code>rdc close</code></pre>

  <h3 id="status">status</h3>
  <p>Show current daemon-backed session status.</p>
  <pre><code>rdc status</code></pre>

  <h3 id="goto">goto</h3>
  <p>Update current event id via daemon.</p>
  <pre><code>rdc goto &lt;EID&gt;</code></pre>

  <h3 id="capture">capture</h3>
  <p>Execute an application and capture a GPU frame. Uses the RenderDoc Python API
    (<code>ExecuteAndInject</code>) when available, falling back to <code>renderdoccmd</code>.</p>
  <pre><code>rdc capture &lt;executable&gt; [args...] [-o OUTPUT]
  [--frame N] [--trigger] [--timeout N] [--wait-for-exit]
  [--auto-open] [--api-validation] [--callstacks]
  [--hook-children] [--ref-all-resources]
  [--soft-memory-limit N] [--delay-for-debugger N]
  [--json]</code></pre>

  <h3 id="doctor">doctor</h3>
  <p>Run environment checks for rdc-cli.</p>
  <pre><code>rdc doctor</code></pre>

  <!-- Inspection -->
  <h2 id="inspection">Inspection</h2>

  <h3 id="info">info</h3>
  <p>Show capture metadata: API, GPU, driver, event count.</p>
  <pre><code>rdc info</code></pre>

  <h3 id="stats">stats</h3>
  <p>Show per-pass breakdown, top draws, largest resources.</p>
  <pre><code>rdc stats</code></pre>

  <h3 id="events">events</h3>
  <p>List all events in the capture.</p>
  <pre><code>rdc events [--type TYPE]</code></pre>

  <h3 id="draws">draws</h3>
  <p>List draw calls, with optional filtering and sorting.</p>
  <pre><code>rdc draws [--pass PASS] [--sort FIELD] [--limit N]</code></pre>

  <h3 id="event">event</h3>
  <p>Show single API call detail.</p>
  <pre><code>rdc event &lt;EID&gt;</code></pre>

  <h3 id="draw">draw</h3>
  <p>Show draw call detail.</p>
  <pre><code>rdc draw &lt;EID&gt;</code></pre>

  <h3 id="log">log</h3>
  <p>Show debug/validation messages from the capture.</p>
  <pre><code>rdc log [--level LEVEL]</code></pre>

  <h3 id="counters">counters</h3>
  <p>Query GPU performance counters.</p>
  <pre><code>rdc counters [--list] [--ids ID,...] [--eid EID]</code></pre>

  <!-- Draw Analysis -->
  <h2 id="draw-analysis">Draw Analysis</h2>

  <h3 id="pipeline">pipeline</h3>
  <p>Show pipeline summary for current or specified EID.</p>
  <pre><code>rdc pipeline &lt;EID&gt; [SECTION]</code></pre>

  <h3 id="bindings">bindings</h3>
  <p>Show bound resources per shader stage.</p>
  <pre><code>rdc bindings &lt;EID&gt; [--stage STAGE]</code></pre>

  <!-- Resources -->
  <h2 id="resources-section">Resources</h2>

  <h3 id="resources">resources</h3>
  <p>List all resources in the capture.</p>
  <pre><code>rdc resources [--type TYPE] [--name NAME] [--sort FIELD]</code></pre>

  <h3 id="resource">resource</h3>
  <p>Show details of a specific resource.</p>
  <pre><code>rdc resource &lt;ID&gt;</code></pre>

  <h3 id="usage">usage</h3>
  <p>Show resource usage (which events read/write a resource).</p>
  <pre><code>rdc usage &lt;ID&gt;</code></pre>

  <h3 id="shader">shader</h3>
  <p>Show shader metadata for a stage at EID (<code>--reflect</code>, <code>--constants</code>, <code>--source</code>, <code>--target</code>, <code>--all</code>).</p>
  <pre><code>rdc shader &lt;EID&gt; &lt;STAGE&gt; [--reflect] [--constants] [--source] [--target TARGET] [-o FILE]</code></pre>

  <h3 id="shaders">shaders</h3>
  <p>List unique shaders in capture.</p>
  <pre><code>rdc shaders</code></pre>

  <h3 id="shader-map">shader-map</h3>
  <p>Output EID-to-shader mapping as TSV.</p>
  <pre><code>rdc shader-map</code></pre>

  <h3 id="search">search</h3>
  <p>Search shader disassembly text for PATTERN (regex).</p>
  <pre><code>rdc search &lt;PATTERN&gt;</code></pre>

  <h3 id="passes">passes</h3>
  <p>List render passes.</p>
  <pre><code>rdc passes</code></pre>

  <h3 id="pass">pass</h3>
  <p>Show detail for a single render pass by index or name.</p>
  <pre><code>rdc pass &lt;INDEX|NAME&gt;</code></pre>

  <!-- Export -->
  <h2 id="export">Export</h2>

  <h3 id="texture">texture</h3>
  <p>Export texture as PNG.</p>
  <pre><code>rdc texture &lt;ID&gt; [-o OUTPUT]</code></pre>

  <h3 id="buffer">buffer</h3>
  <p>Export buffer raw data.</p>
  <pre><code>rdc buffer &lt;ID&gt; [-o OUTPUT]</code></pre>

  <h3 id="rt">rt</h3>
  <p>Export render target as PNG (supports <code>--overlay wireframe|depth|stencil|overdraw</code>).</p>
  <pre><code>rdc rt &lt;EID&gt; [-o OUTPUT] [--overlay TYPE]</code></pre>

  <h3 id="mesh">mesh</h3>
  <p>Export post-transform mesh as OBJ.</p>
  <pre><code>rdc mesh &lt;EID&gt; [-o OUTPUT]</code></pre>

  <h3 id="snapshot">snapshot</h3>
  <p>Export a complete rendering state snapshot for a draw event.</p>
  <pre><code>rdc snapshot &lt;EID&gt; [-o DIR]</code></pre>

  <!-- Pixel & Debug -->
  <h2 id="pixel-debug">Pixel &amp; Debug</h2>

  <h3 id="pixel">pixel</h3>
  <p>Query pixel history at (X, Y) for the current or specified event.</p>
  <pre><code>rdc pixel &lt;EID&gt; &lt;X&gt; &lt;Y&gt;</code></pre>

  <h3 id="pick-pixel">pick-pixel</h3>
  <p>Read pixel color at (X, Y) from the current render target.</p>
  <pre><code>rdc pick-pixel &lt;EID&gt; &lt;X&gt; &lt;Y&gt;</code></pre>

  <h3 id="tex-stats">tex-stats</h3>
  <p>Show texture min/max statistics and optional histogram.</p>
  <pre><code>rdc tex-stats &lt;EID&gt; [--histogram]</code></pre>

  <h3 id="debug-pixel">debug pixel</h3>
  <p>Debug pixel shader at (X, Y) for event EID.</p>
  <pre><code>rdc debug pixel &lt;EID&gt; &lt;X&gt; &lt;Y&gt; [--trace] [--dump-at LINE]</code></pre>

  <h3 id="debug-vertex">debug vertex</h3>
  <p>Debug vertex shader for vertex VTX_ID at event EID.</p>
  <pre><code>rdc debug vertex &lt;EID&gt; &lt;VTX_ID&gt; [--trace] [--dump-at LINE]</code></pre>

  <h3 id="debug-thread">debug thread</h3>
  <p>Debug compute shader thread at workgroup (GX,GY,GZ) thread (TX,TY,TZ).</p>
  <pre><code>rdc debug thread &lt;EID&gt; &lt;GX&gt; &lt;GY&gt; &lt;GZ&gt; &lt;TX&gt; &lt;TY&gt; &lt;TZ&gt; [--trace] [--dump-at LINE]</code></pre>

  <!-- Shader Edit-Replay -->
  <h2 id="shader-edit-replay">Shader Edit-Replay</h2>

  <h3 id="shader-encodings">shader-encodings</h3>
  <p>List available shader encodings for this capture.</p>
  <pre><code>rdc shader-encodings</code></pre>

  <h3 id="shader-build">shader-build</h3>
  <p>Build a shader from source file (GLSL only).</p>
  <pre><code>rdc shader-build &lt;FILE&gt; --stage &lt;STAGE&gt; [--entry ENTRY]</code></pre>

  <h3 id="shader-replace">shader-replace</h3>
  <p>Replace shader at EID/STAGE with a built shader.</p>
  <pre><code>rdc shader-replace &lt;EID&gt; &lt;STAGE&gt; --with &lt;SHADER_ID&gt;</code></pre>

  <h3 id="shader-restore">shader-restore</h3>
  <p>Restore original shader at EID/STAGE.</p>
  <pre><code>rdc shader-restore &lt;EID&gt; &lt;STAGE&gt;</code></pre>

  <h3 id="shader-restore-all">shader-restore-all</h3>
  <p>Restore all replaced shaders and free built resources.</p>
  <pre><code>rdc shader-restore-all</code></pre>

  <!-- CI Assertions -->
  <h2 id="ci-assertions">CI Assertions</h2>

  <h3 id="assert-pixel">assert-pixel</h3>
  <p>Assert pixel RGBA at (x, y) matches expected value within tolerance.</p>
  <pre><code>rdc assert-pixel &lt;EID&gt; &lt;X&gt; &lt;Y&gt; --expect "&lt;R G B A&gt;" [--tolerance T]</code></pre>

  <h3 id="assert-image">assert-image</h3>
  <p>Compare two images pixel-by-pixel.</p>
  <pre><code>rdc assert-image &lt;EXPECTED&gt; &lt;ACTUAL&gt; [--threshold T]</code></pre>

  <h3 id="assert-clean">assert-clean</h3>
  <p>Assert capture log has no messages at or above given severity.</p>
  <pre><code>rdc assert-clean [--min-severity LEVEL]</code></pre>

  <h3 id="assert-count">assert-count</h3>
  <p>Assert a capture metric satisfies a numeric comparison.</p>
  <pre><code>rdc assert-count &lt;WHAT&gt; --expect &lt;N&gt; --op &lt;eq|lt|le|gt|ge&gt;</code></pre>

  <h3 id="assert-state">assert-state</h3>
  <p>Assert pipeline state value at EID matches expected.</p>
  <pre><code>rdc assert-state &lt;EID&gt; &lt;PATH&gt; --expect &lt;VALUE&gt;</code></pre>

  <!-- Capture Diff -->
  <h2 id="capture-diff">Capture Diff</h2>

  <h3 id="diff">diff</h3>
  <p>Compare two RenderDoc captures side-by-side. Supports multiple diff modes.</p>
  <pre><code>rdc diff &lt;FILE_A&gt; &lt;FILE_B&gt; [MODE]

Modes:
  --draws          Compare draw call lists
  --resources      Compare resource lists
  --passes         Compare render passes
  --stats          Compare per-pass statistics
  --framebuffer    Pixel-level framebuffer diff
  --pipeline       Compare pipeline states at matching EIDs</code></pre>

  <!-- Target Control -->
  <h2 id="target-control">Target Control</h2>
  <p>Live interaction with a running RenderDoc-injected target process.</p>

  <h3 id="attach">attach</h3>
  <p>Attach to a running RenderDoc target by ident.</p>
  <pre><code>rdc attach &lt;IDENT&gt;</code></pre>

  <h3 id="capture-trigger">capture-trigger</h3>
  <p>Trigger a capture on the attached target.</p>
  <pre><code>rdc capture-trigger [--frames N]</code></pre>

  <h3 id="capture-list">capture-list</h3>
  <p>List captures from the attached target.</p>
  <pre><code>rdc capture-list [--timeout N] [--json]</code></pre>

  <h3 id="capture-copy">capture-copy</h3>
  <p>Copy a capture from the target to a local path.</p>
  <pre><code>rdc capture-copy &lt;CAPTURE_ID&gt; &lt;DEST&gt;</code></pre>

  <!-- Capture Metadata -->
  <h2 id="capture-metadata">Capture Metadata</h2>
  <p>Inspect capture file metadata without full replay.</p>

  <h3 id="thumbnail">thumbnail</h3>
  <p>Export capture thumbnail image.</p>
  <pre><code>rdc thumbnail [-o OUTPUT] [--maxsize N]</code></pre>

  <h3 id="gpus">gpus</h3>
  <p>List GPUs available at capture time.</p>
  <pre><code>rdc gpus [--json]</code></pre>

  <h3 id="sections">sections</h3>
  <p>List all embedded sections with properties.</p>
  <pre><code>rdc sections [--json]</code></pre>

  <h3 id="section">section</h3>
  <p>Extract named section contents to file or stdout.</p>
  <pre><code>rdc section &lt;NAME&gt; [-o OUTPUT]</code></pre>

  <!-- VFS Navigation -->
  <h2 id="vfs">VFS Navigation</h2>

  <h3 id="ls">ls</h3>
  <p>List VFS directory contents.</p>
  <pre><code>rdc ls [PATH]</code></pre>

  <h3 id="cat">cat</h3>
  <p>Output VFS leaf node content.</p>
  <pre><code>rdc cat &lt;PATH&gt;</code></pre>

  <h3 id="tree">tree</h3>
  <p>Display VFS subtree structure.</p>
  <pre><code>rdc tree [PATH] [--depth DEPTH]</code></pre>

  <!-- Utilities -->
  <h2 id="utilities">Utilities</h2>

  <h3 id="count">count</h3>
  <p>Output a single integer count to stdout.</p>
  <pre><code>rdc count &lt;WHAT&gt;</code></pre>

  <h3 id="completion">completion</h3>
  <p>Generate shell completion script.</p>
  <pre><code>rdc completion &lt;bash|zsh|fish&gt;</code></pre>

  <h3 id="script">script</h3>
  <p>Execute a Python script inside the daemon process.</p>
  <pre><code>rdc script &lt;FILE&gt; [-- ARGS...]</code></pre>

  <h3 id="install-skill">install-skill</h3>
  <p>Install rdc-cli skill files to <code>~/.claude/skills/rdc-cli/</code>.</p>
  <pre><code>rdc install-skill</code></pre>
</Docs>
