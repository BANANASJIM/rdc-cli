---
const base = import.meta.env.BASE_URL;

const categories = [
  { name: 'Session', color: 'from-gpu-accent/20', accent: 'text-gpu-accent', commands: ['open', 'close', 'status', 'goto'] },
  { name: 'Inspection', color: 'from-gpu-green/20', accent: 'text-gpu-green', commands: ['info', 'stats', 'events', 'draws', 'event', 'draw', 'log'] },
  { name: 'GPU State', color: 'from-gpu-purple/20', accent: 'text-gpu-purple', commands: ['pipeline', 'bindings', 'shader', 'shaders', 'shader-map'] },
  { name: 'Resources', color: 'from-gpu-orange/20', accent: 'text-gpu-orange', commands: ['resources', 'resource', 'passes', 'pass', 'usage'] },
  { name: 'Export', color: 'from-gpu-pink/20', accent: 'text-gpu-pink', commands: ['texture', 'rt', 'buffer'] },
  { name: 'Search', color: 'from-yellow-500/20', accent: 'text-yellow-400', commands: ['search', 'counters'] },
  { name: 'VFS', color: 'from-gpu-cyan/20', accent: 'text-gpu-cyan', commands: ['ls', 'cat', 'tree'] },
  { name: 'Utility', color: 'from-gray-500/20', accent: 'text-gray-400', commands: ['doctor', 'completion', 'capture', 'count'] },
];
---

<section id="commands" class="py-32 relative section-glow">
  <div class="max-w-6xl mx-auto px-6">
    <h2 class="text-3xl md:text-5xl font-extrabold text-center mb-4 tracking-tight">
      <span class="gradient-text">33 Commands</span>
    </h2>
    <p class="text-center text-gray-400 mb-20 max-w-lg mx-auto">
      Everything you need to inspect GPU captures, organized by workflow.
    </p>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4" id="commands-grid">
      {categories.map((cat) => (
        <div class={`command-category glass-card p-5 opacity-0 bg-gradient-to-b ${cat.color} to-transparent flex flex-col`}>
          <h3 class={`text-xs font-bold ${cat.accent} mb-4 uppercase tracking-widest`}>{cat.name}</h3>
          <div class="flex flex-wrap gap-1.5 mt-auto">
            {cat.commands.map((cmd) => (
              <a
                href={`${base}docs/commands/#${cmd}`}
                class="px-2.5 py-1 bg-gpu-deeper/80 rounded-md text-xs font-mono text-gray-400 hover:text-gpu-accent hover:bg-gpu-accent/10 transition-all duration-200"
              >
                {cmd}
              </a>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  gsap.fromTo(
    '.command-category',
    { opacity: 0, y: 30, scale: 0.95 },
    {
      opacity: 1,
      y: 0,
      scale: 1,
      duration: 0.5,
      stagger: 0.06,
      ease: 'power3.out',
      scrollTrigger: {
        trigger: '#commands-grid',
        start: 'top 85%',
      },
    },
  );
</script>
